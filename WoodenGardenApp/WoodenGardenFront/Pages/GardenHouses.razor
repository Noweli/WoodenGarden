@page "/gardenhouses"
@using WoodenGardenApp.Shared.DTOs
@using WoodenGardenFront.Services.IServices
@inject NavigationManager _navigationManager
@inject IGardenHouseService _gardenHouseService

<AuthorizeView>
    <div class="input-group bg-secondary border-dark shadow-sm p-2 mb-2">
        <p class="text-danger m-2 fw-bold">Admin options: </p>
        <btn class="btn btn-outline-success" @onclick="NavigateToAddNewGardenHouse">Add new</btn>
    </div>
</AuthorizeView>

<div class="container">
    <div class="row row-cols-1 row-cols-sm2 row-cols-md-3 g-3">
        @if (GardenHousesList is not null)
        {
            foreach (var houseDTO in GardenHousesList)
            {
                <GardenHouse GardenHouseDTO="houseDTO"/>
            }
        }
    </div>
</div>

@code {
    private IEnumerable<GardenHouseDTO>? GardenHousesList { get; set; }

    protected override async Task OnInitializedAsync()
    {
        GardenHousesList = await _gardenHouseService.GetGardenHouses();
    }

    private void NavigateToAddNewGardenHouse() => _navigationManager.NavigateTo("AddGardenHouse");
}